"use strict";var _createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ResponsiveMenu=function(){var t="responsive-menu--show",e="responsive-menu__overlay--show";function n(t){_classCallCheck(this,n),this.config={bgColor:window.config.responsiveMenu.color},Object.assign(this.config,t),this.ui={menuIcon:document.querySelector("[data-rm-btn]"),menu:document.querySelector("[data-rm]"),menuOverlay:document.querySelector("[data-rm-overlay]")},this.startDistance=0,this.movedDistance=0,this.distance=0}return _createClass(n,[{key:"init",value:function(){this._bindEvents()}},{key:"initStyle",value:function(){this.ui.menu.style.backgroundColor=this.config.bgColor,this.ui.menu.style.color=this.getcontrast(this.config.bgColor)}},{key:"_bindEvents",value:function(){document.addEventListener("touchstart",this.touchStart.bind(this),!1),document.addEventListener("touchmove",this.touchMove.bind(this),!1),document.addEventListener("touchend",this.touchEnd.bind(this),!1),this.ui.menuIcon.addEventListener("click",this.toggleMenu.bind(this),!1),this.ui.menuOverlay.addEventListener("click",this.toggleMenu.bind(this),!1)}},{key:"toggleMenu",value:function(){this.isMenuOpen()?this.hideMenu():this.showMenu()}},{key:"isMenuOpen",value:function(){return this.ui.menu.classList.contains(t)}},{key:"hideMenu",value:function(){this.ui.menu.style.transform="",this.ui.menu.classList.remove(t),this.ui.menuOverlay.classList.remove(e)}},{key:"showMenu",value:function(){this.ui.menu.classList.add(t),this.ui.menuOverlay.classList.add(e)}},{key:"transitionEnd",value:function(){this.isMenuOpen()||this.hideMenu()}},{key:"touchStart",value:function(t){this.isMenuOpen()&&(this.startDistance=t.touches[0].pageX,this.distance=this.startDistance)}},{key:"touchMove",value:function(t){var e;this.isMenuOpen()&&(this.movedDistance=t.touches[0].pageX,(e=Math.min(0,this.movedDistance-this.startDistance))<0&&t.preventDefault(),this.ui.menu.style.transform="translateX("+e+"px)")}},{key:"touchEnd",value:function(){var t=Math.min(0,this.movedDistance-this.startDistance);this.ui.menu.style.transform="",t<0&&this.hideMenu()}},{key:"getcontrast",value:function(t){var e=this._toFullHex(t);return 128<=(299*parseInt(e.substr(1,2),16)+587*parseInt(e.substr(3,2),16)+114*parseInt(e.substr(5,2),16))/1e3?"black":"white"}},{key:"_toFullHex",value:function(t){return 4===t.length&&"#"===t.charAt(0)&&(t="#"+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)+t.charAt(3)+t.charAt(3)),t}}]),n}();window.ResponsiveMenu=(new ResponsiveMenu).init();