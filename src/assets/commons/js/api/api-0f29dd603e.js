"use strict";var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ApiClient=function(){function n(e,t){_classCallCheck(this,n),this._host=e,this._token=t}return _createClass(n,[{key:"calatalogGetNovelties",value:function(e){return this._sendRequest("/api/catalog.getNovelties",{},e)}},{key:"calatalogGetProducts",value:function(e){return this._sendRequest("/api/catalog.getProducts",{},e)}},{key:"calatalogGetPromotions",value:function(e){return this._sendRequest("/api/catalog.getPromotions",{},e)}},{key:"newsletterSubscribe",value:function(e,t){return this._sendRequest("/api/newsletter.subscribe",e,t)}},{key:"_sendRequest",value:function(e,t,n){var a=new XMLHttpRequest,r=new FormData;for(var s in r.append("token",this._token),t)r.append(s,t[s]);return a.onreadystatechange=function(e){var t;this.readyState===XMLHttpRequest.DONE&&(200===this.status?"result"in(t=JSON.parse(this.responseText))?n(null,t.result):n(t.error,null):n({name:"Error",message:"Une erreur est survenue, nous travaillons Ã  sa correction."},null))},a.open("POST",this._host+e,!0),a.send(r),a}}]),n}();