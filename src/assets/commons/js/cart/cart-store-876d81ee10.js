"use strict";window.CartStore={state:{products:[],totalCount:0,total:0},addProduct:function(t){var u=this.getProductIndexById(t.id);null===u?this.state.products.push({product:t,quantity:1}):this.state.products[u].quantity+=1,this.update()},updateQuantity:function(t,u){var s=this.getProductIndexById(t);null!==s&&(this.state.products[s].quantity=u),this.update()},removeProduct:function(t){var u=this.getProductIndexById(t);null!==u&&this.state.products.splice(u,1),this.update()},getProductIndexById:function(t){for(var u=0;u<this.state.products.length;u++){if(this.state.products[u].product.id==t)return u}return null},update:function(){this.state.totalCount=this.state.products.reduce(function(t,u){return t+u.quantity},0),this.state.total=this.state.products.reduce(function(t,u){return t+u.product.price*u.quantity},0),this.save()},save:function(){localStorage.cart=JSON.stringify(this.state)},init:function(){localStorage.cart&&(this.state=JSON.parse(localStorage.cart))}},window.CartStore.init();