"use strict";!function(){var t;t=new ApiClient(window.config.api.host,window.config.api.token),new Vue({el:"[data-vue=products]",data:{products:[],showPrice:!0,pageCount:1,filter:{page:1}},computed:{pagedProducts:function(){var t=this.products,e=16*(this.filter.page-1);return this.pageCount=Math.ceil(t.length/16),t.slice(e,16+e)}},created:function(){var n=this;t.calatalogGetPromotions(function(t,e){t&&(e=[]),n.products=e}),this.setFilter(function(){for(var t,e={},n=window.location.href.replace(/^.*\?/,"").replace(/(#.*$)/,"").split("&"),i=/(.*)\[\]$/,o=0;o<n.length;o++){var r=n[o].split("="),a=decodeURIComponent(r[0]),s=decodeURIComponent(r[1]),c=a.match(i);c&&(a=c[1],(t=e[a]?e[a]:[]).push(s),s=t),e[a]=s}return e}()),window.onpopstate=function(t){n.setFilter(t.state)}},methods:{selectPage:function(t){this.filter.page=t,this.updateHistory()},updateHistory:function(){var t={page:this.filter.page},e=location.origin+location.pathname+"?"+function(t){var e="";for(var n in t){var i=t[n];if(Array.isArray(i))for(var o=0;o<i.length;o++)e+=(""==e?"":"&")+n+"[]="+encodeURIComponent(i[o]);else i&&"false"!=i&&(e+=(""==e?"":"&")+n+"="+encodeURIComponent(i))}return e}(t);window.history.pushState(JSON.parse(JSON.stringify(t)),"Recherche",e)},setFilter:function(t){this.filter={page:t.page?t.page:1}}},filters:{aspect_ratio:function(t,e){if(!t||!e)return t;if("nopic.png"==t.substr(-9))return t;var n=t.lastIndexOf(".");return-1==n?t:t.slice(0,n)+"-"+e+t.slice(n)},format_price:function(t){return"number"==typeof t?t.toFixed(2):t}}})}();